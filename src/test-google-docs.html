<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Google Docsçµ±åˆãƒ†ã‚¹ãƒˆ</title>
</head>
<body>
    <h1>Google Docsçµ±åˆãƒ†ã‚¹ãƒˆ</h1>
    <button id="test-button">ãƒ†ã‚¹ãƒˆå®Ÿè¡Œ</button>
    <div id="results"></div>

    <script type="module">
        console.log('ãƒ†ã‚¹ãƒˆãƒšãƒ¼ã‚¸èª­ã¿è¾¼ã¿é–‹å§‹');
        
        // Google Docsãƒ¢ã‚¸ãƒ¥ãƒ¼ãƒ«ã‚’ã‚¤ãƒ³ãƒãƒ¼ãƒˆã—ã¦ãƒ†ã‚¹ãƒˆ
        try {
            console.log('Google Docsãƒ¢ã‚¸ãƒ¥ãƒ¼ãƒ«ã®ã‚¤ãƒ³ãƒãƒ¼ãƒˆã‚’è©¦è¡Œ...');
            
            // å‹•çš„ã‚¤ãƒ³ãƒãƒ¼ãƒˆã§ãƒ†ã‚¹ãƒˆ
            const module = await import('./js/google-docs.js');
            console.log('ã‚¤ãƒ³ãƒãƒ¼ãƒˆæˆåŠŸ:', module);
            
            const GoogleDocsUploader = module.default;
            console.log('GoogleDocsUploaderã‚¯ãƒ©ã‚¹:', GoogleDocsUploader);
            
            if (GoogleDocsUploader) {
                const uploader = new GoogleDocsUploader();
                console.log('GoogleDocsUploaderã‚¤ãƒ³ã‚¹ã‚¿ãƒ³ã‚¹ä½œæˆæˆåŠŸ:', uploader);
                
                document.getElementById('results').innerHTML = `
                    <p style="color: green;">âœ… Google Docsãƒ¢ã‚¸ãƒ¥ãƒ¼ãƒ«èª­ã¿è¾¼ã¿æˆåŠŸ</p>
                    <p>èªè¨¼çŠ¶æ…‹: ${uploader.isAuthenticated}</p>
                    <p>èªè¨¼ã‚µãƒ¼ãƒãƒ¼URL: ${uploader.authServerUrl}</p>
                `;
            }
            
        } catch (error) {
            console.error('Google Docsãƒ¢ã‚¸ãƒ¥ãƒ¼ãƒ«ã®ã‚¤ãƒ³ãƒãƒ¼ãƒˆã‚¨ãƒ©ãƒ¼:', error);
            document.getElementById('results').innerHTML = `
                <p style="color: red;">âŒ Google Docsãƒ¢ã‚¸ãƒ¥ãƒ¼ãƒ«èª­ã¿è¾¼ã¿å¤±æ•—</p>
                <pre>${error.toString()}</pre>
            `;
        }
        
        // èªè¨¼ã‚µãƒ¼ãƒãƒ¼ã®ãƒ†ã‚¹ãƒˆ
        document.getElementById('test-button').addEventListener('click', async () => {
            console.log('èªè¨¼ã‚µãƒ¼ãƒãƒ¼ãƒ†ã‚¹ãƒˆé–‹å§‹');
            try {
                const response = await fetch('http://localhost:3001/health');
                const data = await response.json();
                console.log('èªè¨¼ã‚µãƒ¼ãƒãƒ¼å¿œç­”:', data);
                
                document.getElementById('results').innerHTML += `
                    <p style="color: blue;">ğŸ”— èªè¨¼ã‚µãƒ¼ãƒãƒ¼æ¥ç¶šæˆåŠŸ</p>
                    <pre>${JSON.stringify(data, null, 2)}</pre>
                `;
            } catch (error) {
                console.error('èªè¨¼ã‚µãƒ¼ãƒãƒ¼ãƒ†ã‚¹ãƒˆã‚¨ãƒ©ãƒ¼:', error);
                document.getElementById('results').innerHTML += `
                    <p style="color: red;">âŒ èªè¨¼ã‚µãƒ¼ãƒãƒ¼æ¥ç¶šå¤±æ•—</p>
                    <pre>${error.toString()}</pre>
                `;
            }
        });
    </script>
</body>
</html>
